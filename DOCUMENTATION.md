# SBOM Visualizer - Документация проекта

## Обзор проекта

**SBOM Visualizer** — это веб-приложение для визуализации и анализа Software Bill of Materials (SBOM). Приложение предоставляет интерактивный интерфейс для загрузки, просмотра и анализа компонентов программного обеспечения, их зависимостей и оценок рисков.

## Техническая архитектура

### Технологический стек
- **Frontend Framework**: React 18.3.1 с TypeScript
- **Build Tool**: Vite 5.4.2
- **Styling**: Tailwind CSS 3.4.1
- **Icons**: Lucide React 0.344.0
- **Linting**: ESLint с TypeScript поддержкой

### Структура проекта

```
src/
├── App.tsx                 # Главный компонент приложения
├── components/             # React компоненты
│   ├── ComponentDetails.tsx    # Детальная информация о компоненте
│   ├── ComponentFilter.tsx     # Фильтры для поиска компонентов
│   ├── ComponentTable.tsx      # Таблица компонентов
│   ├── SBOMUploader.tsx        # Загрузчик SBOM файлов
│   └── TreeDiagram.tsx         # Диаграмма зависимостей
├── data/
│   └── mockSBOM.ts         # Тестовые данные
├── types/
│   └── sbom.ts            # TypeScript типы
└── utils/
    ├── sbomMerger.ts      # Утилиты для слияния SBOM
    └── sbomParser.ts      # Парсер SBOM файлов
```

## Функциональность

### 1. Загрузка SBOM файлов
- Поддержка форматов CycloneDX и SPDX (JSON)
- Drag & Drop интерфейс
- Множественная загрузка с автоматическим слиянием
- Валидация формата файлов

### 2. Визуализация данных
- **Таблица компонентов**: Список всех компонентов с фильтрацией
- **Дерево зависимостей**: Интерактивная SVG диаграмма
- **Детальная информация**: Боковая панель с подробностями компонента

### 3. Фильтрация и поиск
- Поиск по названию компонента
- Фильтрация по типу (application/library/dependency)
- Фильтрация по лицензии
- Фильтрация по уровню риска

### 4. Анализ рисков
- Автоматическая оценка уровня риска (low/medium/high)
- Отображение количества CVE
- Цветовая индикация рисков

## Компоненты системы

### App.tsx
Главный компонент, управляющий состоянием приложения:
- Управление данными SBOM
- Состояние фильтров
- Выбор компонентов
- Модальные окна

### ComponentTable.tsx
Таблица для отображения компонентов:
- Сортировка и отображение компонентов
- Интерактивный выбор строк
- Цветовая индикация типов и рисков

### TreeDiagram.tsx
Интерактивная SVG диаграмма зависимостей:
- Алгоритм построения дерева
- Масштабирование и панорамирование
- Интерактивные узлы
- Легенда компонентов

### SBOMUploader.tsx
Компонент загрузки файлов:
- Drag & Drop поддержка
- Валидация файлов
- Слияние множественных SBOM

### ComponentFilter.tsx
Панель фильтров:
- Поиск по тексту
- Чекбоксы для типов, лицензий, рисков
- Динамическое обновление результатов

### ComponentDetails.tsx
Боковая панель с деталями:
- Подробная информация о компоненте
- Список зависимостей
- Информация о рисках и CVE

## Типы данных

### SBOMComponent
```typescript
interface SBOMComponent {
  id: string;
  name: string;
  type: 'library' | 'application' | 'dependency';
  license: string;
  version: string;
  riskLevel: 'low' | 'medium' | 'high';
  cveCount: number;
  dependencies: string[];
  description: string;
}
```

### FilterState
```typescript
interface FilterState {
  type: string[];
  license: string[];
  riskLevel: string[];
  searchTerm: string;
}
```

## Утилиты

### sbomParser.ts
- `parseSBOMFile()`: Парсинг SBOM файлов в внутренний формат
- `validateSBOMFile()`: Валидация структуры SBOM файла

### sbomMerger.ts
- `mergeSBOMs()`: Слияние множественных SBOM в один
- `deduplicateComponents()`: Удаление дубликатов компонентов

## Алгоритмы

### Построение дерева зависимостей
1. Поиск корневого компонента (application или первый)
2. Рекурсивное построение дерева через зависимости
3. Расчет позиций узлов с учетом размеров поддеревьев
4. Центрирование родительских узлов относительно детей

### Оценка рисков
- **Low**: Стандартные лицензии, стабильные версии
- **Medium**: GPL лицензии, неизвестные лицензии
- **High**: Deprecated компоненты, alpha/beta версии

## Установка и запуск

### Требования
- Node.js 18+
- npm или yarn

### Команды
```bash
# Установка зависимостей
npm install

# Запуск в режиме разработки
npm run dev

# Сборка для продакшена
npm run build

# Предварительный просмотр сборки
npm run preview

# Линтинг
npm run lint
```

## Поддерживаемые форматы SBOM

### CycloneDX
```json
{
  "bomFormat": "CycloneDX",
  "specVersion": "1.4",
  "components": [...],
  "dependencies": [...]
}
```

### SPDX
```json
{
  "spdxVersion": "SPDX-2.3",
  "packages": [...],
  "relationships": [...]
}
```

## Ограничения

1. **Размер файлов**: Ограничение на 10MB для загружаемых файлов
2. **Форматы**: Поддержка только JSON форматов
3. **CVE данные**: Мокированные данные (требует интеграции с реальной БД)
4. **Производительность**: Может замедляться при >1000 компонентах

## Планы развития

1. **Интеграция с CVE базами**: Подключение к реальным источникам уязвимостей
2. **Экспорт отчетов**: PDF/Excel экспорт результатов анализа
3. **API интеграция**: REST API для интеграции с CI/CD
4. **Расширенная визуализация**: Графовые алгоритмы для больших зависимостей
5. **Командная работа**: Сохранение и совместное использование анализов
